# Зміни 2025-12-17

- Додано підтримку формату Firebase Storage API `.../v0/b/<bucket>/o?name=<path>` (зокрема домен `firebasestorage.app`) при конвертації збережених URL у підписаний downloadURL через SDK.
- Було: якщо у Firestore зберігався URL виду `.../o?name=artist%2F...png` без токена — він потрапляв у DOM напряму, що давало 404 + CORS (preflight) у Network.
- Стало: такі URL парсяться, перетворюються у `gs://` і отримують коректний HTTPS downloadURL; якщо формат не вдалося конвертувати — для `firebasestorage.*` повертається `null`, щоб не робити проблемних запитів.
- Оновлено тест `tests/storage-url-coercion.md` — додано кейс для `o?name=`.
- Оновлено Service Worker cache version до v6, щоб браузер підтягнув новий код без ручного очищення кешів.

## Нотатка
Якщо Service Worker вже встановлений, зробіть Hard Reload або перевідкрийте вкладку після оновлення.
