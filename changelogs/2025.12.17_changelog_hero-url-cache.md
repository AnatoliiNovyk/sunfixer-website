# Зміни 2025-12-17

- Додано дедуплікацію та негативне кешування для резолву Storage URL, щоб зупинити повторні CORS/404 запити на `.../o?name=...` при відсутніх файлах або некоректних шляхах.
- Для hero-зображення тепер додатково зберігається `hero_image_url` (downloadURL) у Firestore, і при читанні він використовується в першу чергу — це прибирає потребу викликати Storage API на кожному завантаженні сторінки.
- Глобальний `IMG error` хендлер тепер повертає градієнтний плейсхолдер hero, якщо саме hero-картинка не завантажилась.
- Service Worker оновлено: `skipWaiting` + `clients.claim`, кеш піднято до `sunfixer-cache-v7`, щоб оновлення застосовувались без ручного очищення кешів.

## Було
- На кожен рендер/снапшот могли повторюватись виклики Storage API, що давало “шторм” `CORS + 404` (preflight) на `.../o?name=artist%2F...`.

## Стало
- Невдалі резолви кешуються в пам’яті сесії, повторні запити припиняються; hero після аплоаду та після перезавантаження використовує збережений `hero_image_url`.

## Причина
- Основна проблема була не в UI, а в повторних зверненнях до Storage API для невалідних/відсутніх файлів та відсутності персисту downloadURL для hero.
