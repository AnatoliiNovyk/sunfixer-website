<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SUNFIXER ‚Äî Neurofunk Architect</title>
  <meta name="description" content="SUNFIXER ‚Äî Neurofunk/Dark DnB –∞—Ä—Ç–∏—Å—Ç. –û—Ñ—ñ—Ü—ñ–π–Ω–∏–π –ª–µ–Ω–¥—ñ–Ω–≥ —Ç–∞ CMS." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;700&family=Rajdhani:wght@400;500;600&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            display: ['Orbitron', 'sans-serif'],
            body: ['Rajdhani', 'sans-serif'],
          },
          colors: {
            cyberBg: '#0a0a0f',
            neonPurple: '#8b5cf6',
            neonCyan: '#06b6d4',
            acidGreen: '#10b981',
          },
        },
      },
    };
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    body { background: #0a0a0f; color: #e5e7eb; font-family: 'Rajdhani', sans-serif; }
    .glass { background: rgba(255, 255, 255, 0.04); border: 1px solid rgba(255, 255, 255, 0.08); box-shadow: 0 10px 30px rgba(0,0,0,0.35); backdrop-filter: blur(12px); }
    .neon-text { text-shadow: 0 0 12px rgba(139, 92, 246, 0.7), 0 0 24px rgba(6, 182, 212, 0.55); }
    .glitch { position: relative; }
    .glitch::before, .glitch::after { content: attr(data-text); position: absolute; left: 0; top: 0; width: 100%; overflow: hidden; clip-path: inset(0 0 0 0); } 
    .glitch::before { color: #8b5cf6; transform: translate(2px, -2px); mix-blend-mode: screen; opacity: 0.7; animation: glitch 2s infinite; }
    .glitch::after { color: #06b6d4; transform: translate(-2px, 2px); mix-blend-mode: screen; opacity: 0.7; animation: glitch 1.8s infinite; }
    @keyframes glitch { 0% { clip-path: inset(0 0 0 0); } 20% { clip-path: inset(10% 0 15% 0); } 40% { clip-path: inset(5% 0 30% 0); } 60% { clip-path: inset(25% 0 10% 0); } 80% { clip-path: inset(15% 0 25% 0); } 100% { clip-path: inset(0 0 0 0); } }
    #modalOverlay { display: none; }
    #modalOverlay.active { display: flex; }
  </style>
</head>
<body class="min-h-screen bg-cyberBg text-slate-100">
  <div class="fixed inset-0 pointer-events-none opacity-40" aria-hidden="true">
    <div class="absolute -left-10 top-10 h-48 w-48 rounded-full bg-neonPurple blur-3xl"></div>
    <div class="absolute right-10 bottom-10 h-48 w-48 rounded-full bg-neonCyan blur-3xl"></div>
  </div>

  <header class="sticky top-0 z-20 backdrop-blur bg-cyberBg/70 border-b border-white/10">
    <div class="max-w-6xl mx-auto flex items-center justify-between px-4 py-3">
      <div class="flex items-center gap-3">
        <span class="text-neonPurple text-2xl font-bold font-display glitch" data-text="SUNFIXER">SUNFIXER</span>
        <span class="text-sm text-slate-400">Neurofunk Architect</span>
      </div>
      <nav class="hidden md:flex items-center gap-4 text-sm uppercase tracking-wide">
        <a class="hover:text-neonPurple" href="#hero">About</a>
        <a class="hover:text-neonPurple" href="#discography">Discography</a>
        <a class="hover:text-neonPurple" href="#videos">Videos</a>
        <a class="hover:text-neonPurple" href="#photos">Photos</a>
        <a class="hover:text-neonPurple" href="#events">Events</a>
        <a class="hover:text-neonPurple" href="#label">Label</a>
        <a class="hover:text-neonPurple" href="#partners">Partners</a>
        <a class="hover:text-neonPurple" href="#contact">Contact</a>
      </nav>
      <button id="adminToggle" class="px-3 py-2 rounded-md border border-neonPurple text-neonPurple hover:bg-neonPurple hover:text-cyberBg transition font-semibold text-sm">‚öôÔ∏è Admin</button>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 pb-20">
    <section id="hero" class="pt-16 pb-12 flex flex-col gap-8">
      <div class="flex flex-col md:flex-row items-center gap-8">
        <div class="flex-1 space-y-4">
          <p class="text-neonCyan uppercase tracking-[0.3em] text-xs">Neurofunk / Dark DnB</p>
          <h1 id="heroTitle" class="text-4xl md:text-5xl font-display neon-text">SUNFIXER ‚Äî Shaping dark energy of sound</h1>
          <p id="heroBio" class="text-lg text-slate-300 max-w-2xl">–°—Ç–≤–æ—Ä–∏ –µ–ª–µ–∫—Ç—Ä–∏—Ñ—ñ–∫—É—é—á—É –ø–æ–¥–æ—Ä–æ–∂ –∫—Ä—ñ–∑—å –∫—ñ–±–µ—Ä–ø–∞–Ω–∫-—Å–∞—É–Ω–¥. –¶–µ–π –ª–µ–Ω–¥—ñ–Ω–≥ —ñ CMS ‚Äî —î–¥–∏–Ω–∞ —Ç–æ—á–∫–∞ –ø—Ä–∞–≤–¥–∏ –¥–ª—è —Ä–µ–ª—ñ–∑—ñ–≤, –≤—ñ–¥–µ–æ, —Ñ–æ—Ç–æ —Ç–∞ –ª–∞–π–≤-–ø–æ–¥—ñ–π.</p>
          <div class="flex gap-3">
            <a href="#discography" class="px-5 py-3 rounded-md bg-neonPurple text-cyberBg font-semibold shadow-lg shadow-neonPurple/30 hover:scale-105 transition">üéß –°–ª—É—Ö–∞—Ç–∏ –∑–∞—Ä–∞–∑</a>
            <a href="#events" class="px-5 py-3 rounded-md border border-neonCyan text-neonCyan font-semibold hover:bg-neonCyan hover:text-cyberBg transition">–ü–æ–¥—ñ—ó</a>
          </div>
        </div>
        <div class="flex-1">
          <div class="relative glass rounded-2xl overflow-hidden border border-white/10 p-1">
            <div class="aspect-[4/5] bg-gradient-to-br from-neonPurple/50 via-cyberBg to-neonCyan/50 flex items-center justify-center text-6xl font-display neon-text">SF</div>
            <div class="absolute inset-x-4 bottom-4 flex items-center justify-between text-xs text-slate-300">
              <span class="flex items-center gap-2"><i class="fa-solid fa-wave-square text-neonCyan"></i> Live energy</span>
              <span class="flex items-center gap-2"><i class="fa-solid fa-bolt text-acidGreen"></i> Bass impact</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="discography" class="py-12 space-y-6">
      <header class="flex items-center justify-between">
        <div>
          <p class="text-neonCyan uppercase tracking-[0.25em] text-xs">–†–µ–ª—ñ–∑–∏</p>
          <h2 class="text-3xl font-display">Discography</h2>
        </div>
        <div class="flex items-center gap-2 text-sm">
          <button data-filter="all" class="release-filter px-3 py-1 rounded border border-white/15 hover:border-neonPurple">–í—Å—ñ</button>
          <button data-filter="album" class="release-filter px-3 py-1 rounded border border-white/15 hover:border-neonPurple">Albums</button>
          <button data-filter="single" class="release-filter px-3 py-1 rounded border border-white/15 hover:border-neonPurple">Singles</button>
          <button data-filter="remix" class="release-filter px-3 py-1 rounded border border-white/15 hover:border-neonPurple">Remixes</button>
        </div>
      </header>
      <div id="discographyGrid" class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3"></div>
    </section>

    <section id="videos" class="py-12 space-y-6">
      <header>
        <p class="text-neonCyan uppercase tracking-[0.25em] text-xs">–í—ñ–¥–µ–æ</p>
        <h2 class="text-3xl font-display">Videos</h2>
      </header>
      <div id="videosGrid" class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3"></div>
    </section>

    <section id="photos" class="py-12 space-y-6">
      <header>
        <p class="text-neonCyan uppercase tracking-[0.25em] text-xs">–§–æ—Ç–æ</p>
        <h2 class="text-3xl font-display">Photos</h2>
      </header>
      <div id="photosGrid" class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3"></div>
    </section>

    <section id="events" class="py-12 space-y-6">
      <header>
        <p class="text-neonCyan uppercase tracking-[0.25em] text-xs">–ü–æ–¥—ñ—ó</p>
        <h2 class="text-3xl font-display">Events</h2>
      </header>
      <div id="eventsList" class="space-y-4"></div>
    </section>

    <section id="label" class="py-12 space-y-6">
      <header>
        <p class="text-neonCyan uppercase tracking-[0.25em] text-xs">–õ–µ–π–±–ª</p>
        <h2 class="text-3xl font-display">CORE64 RECORDS</h2>
      </header>
      <div id="labelInfo" class="glass rounded-xl p-6 border border-white/10 flex flex-col md:flex-row gap-6"></div>
    </section>

    <section id="partners" class="py-12 space-y-6">
      <header>
        <p class="text-neonCyan uppercase tracking-[0.25em] text-xs">–ü–∞—Ä—Ç–Ω–µ—Ä–∏</p>
        <h2 class="text-3xl font-display">Partners & Friends</h2>
      </header>
      <div id="partnersGrid" class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3"></div>
    </section>

    <section id="contact" class="py-12 space-y-6">
      <header>
        <p class="text-neonCyan uppercase tracking-[0.25em] text-xs">–ö–æ–Ω—Ç–∞–∫—Ç</p>
        <h2 class="text-3xl font-display">Contact</h2>
      </header>
      <div class="grid gap-6 lg:grid-cols-2">
        <form class="glass rounded-xl p-6 border border-white/10 space-y-4">
          <div>
            <label class="block text-sm text-slate-300 mb-1">–Ü–º'—è</label>
            <input type="text" class="w-full bg-black/40 border border-white/10 rounded-md px-3 py-2 focus:outline-none focus:border-neonPurple" placeholder="–¢–≤–æ—î —ñ–º'—è" />
          </div>
          <div>
            <label class="block text-sm text-slate-300 mb-1">Email</label>
            <input type="email" class="w-full bg-black/40 border border-white/10 rounded-md px-3 py-2 focus:outline-none focus:border-neonCyan" placeholder="you@example.com" />
          </div>
          <div>
            <label class="block text-sm text-slate-300 mb-1">–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</label>
            <textarea rows="4" class="w-full bg-black/40 border border-white/10 rounded-md px-3 py-2 focus:outline-none focus:border-acidGreen" placeholder="–©–æ –ø–ª–∞–Ω—É—î–º–æ?"></textarea>
          </div>
          <button type="button" class="w-full py-3 rounded-md bg-neonPurple text-cyberBg font-semibold hover:scale-[1.01] transition">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
        </form>
        <div id="contactPanel" class="glass rounded-xl p-6 border border-white/10 space-y-3"></div>
      </div>
    </section>
  </main>

  <div id="modalOverlay" class="fixed inset-0 z-30 bg-black/70 backdrop-blur-sm items-center justify-center px-4">
    <div class="absolute inset-0" aria-hidden="true"></div>
    <div class="relative max-w-3xl w-full glass rounded-2xl p-4 border border-white/10">
      <button id="modalClose" class="absolute top-3 right-3 text-slate-200 hover:text-white" aria-label="–ó–∞–∫—Ä–∏—Ç–∏">‚úï</button>
      <div id="modalContent" class="text-slate-200">–ö–æ–Ω—Ç–µ–Ω—Ç –º–æ–¥–∞–ª–∫–∏</div>
    </div>
  </div>

  <script>
    const firebaseConfig = {
      apiKey: 'YOUR_API_KEY',
      authDomain: 'YOUR_AUTH_DOMAIN',
      projectId: 'YOUR_PROJECT_ID',
      storageBucket: 'YOUR_STORAGE_BUCKET',
      messagingSenderId: 'YOUR_SENDER_ID',
      appId: 'YOUR_APP_ID',
    };

    const ADMIN_UIDS = ['YOUR_ADMIN_UID'];

    const modalOverlay = document.getElementById('modalOverlay');
    const modalContent = document.getElementById('modalContent');
    const modalClose = document.getElementById('modalClose');

    const modalRegistry = { release: {}, video: {}, photo: {} };
    const state = {
      artistInfo: null,
      releases: [],
      videos: [],
      photos: [],
      events: [],
      label: null,
      partners: [],
      releaseFilter: 'all',
    };

    const heroTitleEl = document.getElementById('heroTitle');
    const heroBioEl = document.getElementById('heroBio');
    const discographyGrid = document.getElementById('discographyGrid');
    const videosGrid = document.getElementById('videosGrid');
    const photosGrid = document.getElementById('photosGrid');
    const eventsList = document.getElementById('eventsList');
    const labelInfo = document.getElementById('labelInfo');
    const partnersGrid = document.getElementById('partnersGrid');
    const contactPanel = document.getElementById('contactPanel');

    function openModal(html) {
      modalContent.innerHTML = html;
      modalOverlay.classList.add('active');
    }

    function closeModal() {
      modalOverlay.classList.remove('active');
    }

    modalClose.addEventListener('click', closeModal);
    modalOverlay.addEventListener('click', (e) => {
      if (e.target === modalOverlay) closeModal();
    });
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeModal();
    });

    function registerModal(type, id, payload) {
      if (!modalRegistry[type]) modalRegistry[type] = {};
      modalRegistry[type][id] = payload;
    }

    function buildModal(type, id) {
      const item = modalRegistry[type]?.[id];
      if (!item) return '<div class="text-slate-200">–ö–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.</div>';
      if (type === 'release') {
        return `<div class="space-y-3"><h3 class="text-xl font-display">${item.title}</h3>${item.embed ?? '<p class="text-slate-300">–ù–µ–º–∞—î –ø–ª–µ—î—Ä–∞</p>'}</div>`;
      }
      if (type === 'video') {
        return `<div class="space-y-3"><h3 class="text-xl font-display">${item.title}</h3><div class="aspect-video w-full"><iframe class="w-full h-full" src="https://www.youtube.com/embed/${item.youtubeId}" title="YouTube video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></div></div>`;
      }
      if (type === 'photo') {
        return `<div class="space-y-3"><h3 class="text-xl font-display">${item.title ?? '–§–æ—Ç–æ'}</h3><img src="${item.url}" alt="${item.title ?? ''}" class="w-full rounded-lg" loading="lazy" /></div>`;
      }
      return '<div class="text-slate-200">–ù–µ–≤—ñ–¥–æ–º–∏–π —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç—É.</div>';
    }

    function attachModalHandlers(scope = document) {
      scope.querySelectorAll('[data-modal-type]').forEach((el) => {
        el.addEventListener('click', () => {
          const type = el.getAttribute('data-modal-type');
          const id = el.getAttribute('data-modal-id');
          openModal(buildModal(type, id));
        });
      });
    }

    function renderHero(info) {
      if (!info) return;
      heroTitleEl.textContent = info.tagline || 'SUNFIXER ‚Äî Neurofunk Architect';
      heroBioEl.textContent = info.bio || 'Shaping dark energy of sound';
    }

    function renderReleases() {
      discographyGrid.innerHTML = '';
      const filtered = state.releases.filter((r) => state.releaseFilter === 'all' || (r.type || 'all') === state.releaseFilter);
      if (!filtered.length) {
        discographyGrid.innerHTML = '<p class="text-slate-400">–ù–µ–º–∞—î —Ä–µ–ª—ñ–∑—ñ–≤.</p>';
        return;
      }
      filtered.forEach((rel) => {
        const card = document.createElement('article');
        card.className = 'glass rounded-xl p-4 border border-white/10 hover:border-neonPurple/50 transition cursor-pointer flex flex-col gap-3';
        card.setAttribute('data-modal-type', 'release');
        card.setAttribute('data-modal-id', rel.id);
        card.innerHTML = `
          <div class="aspect-square bg-gradient-to-br from-neonPurple/40 to-neonCyan/30 rounded-lg mb-2 overflow-hidden">
            ${rel.coverUrl ? `<img src="${rel.coverUrl}" alt="${rel.title}" class="w-full h-full object-cover" loading="lazy" />` : ''}
          </div>
          <div class="flex items-center justify-between gap-2">
            <div>
              <h3 class="text-xl font-display">${rel.title}</h3>
              <p class="text-xs text-slate-400">${rel.date ?? ''}</p>
            </div>
            <span class="text-[10px] uppercase tracking-wide text-neonCyan">${rel.type ?? 'release'}</span>
          </div>
        `;
        registerModal('release', rel.id, { title: rel.title, embed: rel.embedHtml });
        discographyGrid.appendChild(card);
      });
      attachModalHandlers(discographyGrid);
    }

    function renderVideos() {
      videosGrid.innerHTML = '';
      if (!state.videos.length) {
        videosGrid.innerHTML = '<p class="text-slate-400">–ù–µ–º–∞—î –≤—ñ–¥–µ–æ.</p>';
        return;
      }
      state.videos.forEach((v) => {
        const card = document.createElement('article');
        card.className = 'glass rounded-xl overflow-hidden border border-white/10 hover:border-neonPurple/50 transition cursor-pointer flex flex-col';
        card.setAttribute('data-modal-type', 'video');
        card.setAttribute('data-modal-id', v.id);
        card.innerHTML = `
          <div class="aspect-video bg-gradient-to-br from-neonCyan/30 to-neonPurple/30 flex items-center justify-center text-slate-300">
            ${v.thumbnail ? `<img src="${v.thumbnail}" alt="${v.title}" class="w-full h-full object-cover" loading="lazy" />` : 'YouTube –ø—Ä–µ–≤\'—é'}
          </div>
          <div class="p-3">
            <h3 class="text-lg font-display">${v.title}</h3>
          </div>
        `;
        registerModal('video', v.id, { title: v.title, youtubeId: v.youtubeId });
        videosGrid.appendChild(card);
      });
      attachModalHandlers(videosGrid);
    }

    function renderPhotos() {
      photosGrid.innerHTML = '';
      if (!state.photos.length) {
        photosGrid.innerHTML = '<p class="text-slate-400">–ù–µ–º–∞—î —Ñ–æ—Ç–æ.</p>';
        return;
      }
      state.photos.forEach((p) => {
        const card = document.createElement('div');
        card.className = 'glass rounded-lg overflow-hidden bg-gradient-to-br from-neonPurple/25 to-neonCyan/20 cursor-pointer';
        card.style.minHeight = '180px';
        card.setAttribute('data-modal-type', 'photo');
        card.setAttribute('data-modal-id', p.id);
        card.innerHTML = p.url ? `<img src="${p.url}" alt="${p.alt ?? ''}" class="w-full h-full object-cover" loading="lazy" />` : '';
        registerModal('photo', p.id, { title: p.alt, url: p.url });
        photosGrid.appendChild(card);
      });
      attachModalHandlers(photosGrid);
    }

    function renderEvents() {
      eventsList.innerHTML = '';
      if (!state.events.length) {
        eventsList.innerHTML = '<p class="text-slate-400">–ù–∞—Ä–∞–∑—ñ –Ω–µ–º–∞—î –ø–æ–¥—ñ–π.</p>';
        return;
      }
      const sorted = [...state.events].sort((a, b) => (a.date || '').localeCompare(b.date || ''));
      sorted.forEach((ev) => {
        const row = document.createElement('div');
        row.className = 'glass rounded-lg p-4 border border-white/10 flex items-center justify-between';
        row.innerHTML = `
          <div>
            <p class="text-sm text-neonCyan">${ev.date ?? ''} ‚Äî ${ev.location ?? ''}</p>
            <p class="text-lg font-semibold">${ev.title}</p>
          </div>
          ${ev.ticketUrl ? `<a class="text-sm text-neonPurple hover:text-white" href="${ev.ticketUrl}" target="_blank" rel="noreferrer">–ö–≤–∏—Ç–∫–∏</a>` : '<span class="text-xs text-slate-500">info soon</span>'}
        `;
        eventsList.appendChild(row);
      });
    }

    function renderLabel() {
      labelInfo.innerHTML = '';
      const label = state.label;
      if (!label) {
        labelInfo.innerHTML = '<p class="text-slate-400">–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ª–µ–π–±–ª—É –±—É–¥–µ –¥–æ–¥–∞–Ω–∞.</p>';
        return;
      }
      labelInfo.innerHTML = `
        <div class="h-24 w-24 rounded-full bg-gradient-to-br from-neonPurple/40 to-neonCyan/30 overflow-hidden">
          ${label.logo ? `<img src="${label.logo}" alt="${label.name}" class="w-full h-full object-cover" loading="lazy" />` : ''}
        </div>
        <div class="space-y-2">
          <p class="text-slate-300">${label.desc ?? ''}</p>
          <div class="flex flex-wrap gap-3 text-neonCyan text-sm">
            ${(label.links || []).map((l) => `<a href="${l.url}" class="hover:text-white" target="_blank" rel="noreferrer">${l.name}</a>`).join('')}
          </div>
        </div>
      `;
    }

    function renderPartners() {
      partnersGrid.innerHTML = '';
      if (!state.partners.length) {
        partnersGrid.innerHTML = '<p class="text-slate-400">–ü–∞—Ä—Ç–Ω–µ—Ä–∏ –±—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ.</p>';
        return;
      }
      state.partners.forEach((p) => {
        const card = document.createElement('div');
        card.className = 'glass rounded-lg p-4 text-center text-slate-300 hover:border-neonPurple/50 border border-white/10 transition flex items-center justify-center min-h-[96px]';
        card.innerHTML = p.logo ? `<img src="${p.logo}" alt="${p.name}" class="max-h-12 mx-auto" loading="lazy" />` : p.name;
        partnersGrid.appendChild(card);
      });
    }

    function renderContact(info) {
      contactPanel.innerHTML = '';
      const email = info?.email || 'booking@sunfixer.pp.ua';
      const socials = info?.socials || {};
      contactPanel.innerHTML = `
        <p class="text-slate-300">–ë—É–∫—ñ–Ω–≥, –∫–æ–ª–∞–±–∏, –ø—Ä–æ–º–æ: <a class="text-neonCyan hover:text-white" href="mailto:${email}">${email}</a></p>
        <div class="flex gap-3 text-neonPurple text-xl">
          ${socials.instagram ? `<a href="${socials.instagram}" class="hover:text-white" target="_blank" rel="noreferrer"><i class="fa-brands fa-instagram"></i></a>` : ''}
          ${socials.youtube ? `<a href="${socials.youtube}" class="hover:text-white" target="_blank" rel="noreferrer"><i class="fa-brands fa-youtube"></i></a>` : ''}
          ${socials.soundcloud ? `<a href="${socials.soundcloud}" class="hover:text-white" target="_blank" rel="noreferrer"><i class="fa-brands fa-soundcloud"></i></a>` : ''}
          ${socials.spotify ? `<a href="${socials.spotify}" class="hover:text-white" target="_blank" rel="noreferrer"><i class="fa-brands fa-spotify"></i></a>` : ''}
        </div>
      `;
    }

    function renderAll() {
      renderHero(state.artistInfo);
      renderReleases();
      renderVideos();
      renderPhotos();
      renderEvents();
      renderLabel();
      renderPartners();
      renderContact(state.artistInfo);
    }

    async function getDownloadUrlIfGs(storage, gsUrl) {
      if (!gsUrl || !storage) return gsUrl;
      if (!gsUrl.startsWith('gs://')) return gsUrl;
      try {
        const ref = storage.refFromURL(gsUrl);
        return await ref.getDownloadURL();
      } catch (e) {
        console.warn('–ù–µ –≤–¥–∞–ª–æ—Å—å –æ—Ç—Ä–∏–º–∞—Ç–∏ URL', e);
        return gsUrl;
      }
    }

    async function initFirebaseAndData() {
      const hasConfig = firebaseConfig.apiKey && firebaseConfig.apiKey !== 'YOUR_API_KEY';
      if (!hasConfig) {
        console.warn('Firebase config –Ω–µ –∑–∞–ø–æ–≤–Ω–µ–Ω–æ, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é –º–æ–∫-–¥–∞–Ω—ñ.');
        loadMockData();
        return;
      }
      try {
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore(app);
        const storage = firebase.storage(app);

        db.collection('artist_info').limit(1).onSnapshot((snap) => {
          snap.forEach((doc) => {
            state.artistInfo = { id: doc.id, ...doc.data() };
            renderHero(state.artistInfo);
            renderContact(state.artistInfo);
          });
        });

        db.collection('releases').onSnapshot(async (snap) => {
          const items = await Promise.all(snap.docs.map(async (doc) => {
            const data = doc.data();
            const coverUrl = await getDownloadUrlIfGs(storage, data.cover_gs_url);
            const embedHtml = data.platforms?.spotify
              ? `<iframe style="border-radius:12px" src="${data.platforms.spotify}" width="100%" height="352" frameborder="0" allowfullscreen allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>`
              : '';
            return { id: doc.id, title: data.title, date: data.date, coverUrl, embedHtml, type: data.type || 'release' };
          }));
          state.releases = items;
          renderReleases();
        });

        db.collection('videos').onSnapshot(async (snap) => {
          const items = await Promise.all(snap.docs.map(async (doc) => {
            const data = doc.data();
            const thumbnail = await getDownloadUrlIfGs(storage, data.thumbnail_gs_url);
            return { id: doc.id, title: data.title, youtubeId: data.youtubeId, thumbnail };
          }));
          state.videos = items;
          renderVideos();
        });

        db.collection('photos').onSnapshot(async (snap) => {
          const items = await Promise.all(snap.docs.map(async (doc) => {
            const data = doc.data();
            const url = await getDownloadUrlIfGs(storage, data.image_gs_url);
            return { id: doc.id, title: data.alt, alt: data.alt, url, category: data.category };
          }));
          state.photos = items;
          renderPhotos();
        });

        db.collection('events').onSnapshot((snap) => {
          state.events = snap.docs.map((doc) => ({ id: doc.id, ...doc.data() }));
          renderEvents();
        });

        db.collection('label').limit(1).onSnapshot(async (snap) => {
          snap.forEach(async (doc) => {
            const data = doc.data();
            const logo = await getDownloadUrlIfGs(storage, data.logo);
            state.label = { ...data, logo };
            renderLabel();
          });
        });

        db.collection('partners').onSnapshot(async (snap) => {
          const items = await Promise.all(snap.docs.map(async (doc) => {
            const data = doc.data();
            const logo = await getDownloadUrlIfGs(storage, data.logo_gs_url);
            return { id: doc.id, name: data.name, url: data.url, logo };
          }));
          state.partners = items;
          renderPartners();
        });
      } catch (error) {
        console.error('–ü–æ–º–∏–ª–∫–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó Firebase, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é –º–æ–∫-–¥–∞–Ω—ñ', error);
        loadMockData();
      }
    }

    function loadMockData() {
      state.artistInfo = {
        tagline: 'SUNFIXER ‚Äî Neurofunk Architect',
        bio: '–î–µ–º–æ –±—ñ–æ: –∫—ñ–±–µ—Ä–ø–∞–Ω–∫ —Å–∞—É–Ω–¥, –≤–∞–∂–∫–∏–π –±–∞—Å, —Ç–µ–º–Ω—ñ —Ä–∏—Ç–º–∏.',
        email: 'booking@sunfixer.pp.ua',
        socials: {
          instagram: '#', youtube: '#', soundcloud: '#', spotify: '#',
        },
      };
      state.releases = [
        {
          id: 'demo-release',
          title: 'Placeholder Release',
          date: '2025',
          coverUrl: 'https://images.unsplash.com/photo-1470229538611-16ba8c7ffbd7?auto=format&fit=crop&w=800&q=80',
          embedHtml: `<iframe style="border-radius:12px" src="https://open.spotify.com/embed/track/7ouMYWpwJ422jRcDASZB7P?utm_source=generator" width="100%" height="352" frameborder="0" allowfullscreen allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>`,
          type: 'single',
        },
      ];
      state.videos = [
        {
          id: 'demo-video',
          title: 'Placeholder Video',
          youtubeId: 'dQw4w9WgXcQ',
          thumbnail: 'https://images.unsplash.com/photo-1489515217757-5fd1be406fef?auto=format&fit=crop&w=800&q=80',
        },
      ];
      state.photos = [
        { id: 'demo-photo-1', title: 'Live shot', url: 'https://images.unsplash.com/photo-1489515217757-5fd1be406fef?auto=format&fit=crop&w=1200&q=80' },
        { id: 'demo-photo-2', title: 'Studio lights', url: 'https://images.unsplash.com/photo-1487180144351-b8472da7d491?auto=format&fit=crop&w=1200&q=80' },
        { id: 'demo-photo-3', title: 'City night', url: 'https://images.unsplash.com/photo-1506157786151-b8491531f063?auto=format&fit=crop&w=1200&q=80' },
      ];
      state.events = [
        { id: 'demo-ev', title: 'SUNFIXER LIVE', date: '12.03.2025', location: '–ö–∏—ó–≤', ticketUrl: '#' },
      ];
      state.label = {
        name: 'CORE64 RECORDS',
        desc: '–û—Ñ—ñ—Ü—ñ–π–Ω–∏–π –ª–µ–π–±–ª SUNFIXER. –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∏—Ö —Å–∞—É–Ω–¥-–¥–∏–∑–∞–π–Ω–µ—Ä—ñ–≤ —Ç–∞ DnB –ø—Ä–æ–¥—é—Å–µ—Ä—ñ–≤.',
        logo: '',
        links: [
          { name: 'Website', url: '#' },
          { name: 'Instagram', url: '#' },
          { name: 'Bandcamp', url: '#' },
        ],
      };
      state.partners = [
        { id: 'p1', name: '–ü–∞—Ä—Ç–Ω–µ—Ä 1', logo: '' },
        { id: 'p2', name: '–ü–∞—Ä—Ç–Ω–µ—Ä 2', logo: '' },
      ];
      renderAll();
    }

    document.querySelectorAll('.release-filter').forEach((btn) => {
      btn.addEventListener('click', () => {
        state.releaseFilter = btn.getAttribute('data-filter');
        renderReleases();
      });
    });

    renderAll();
    initFirebaseAndData();
  </script>
</body>
</html>
